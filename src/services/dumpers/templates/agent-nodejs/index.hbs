const dotenv = require('dotenv');
dotenv.config();

const { createAgent } = require('@forestadmin/agent');
{{datasourceImport}}

(async () => {
  await createAgent({
    authSecret: process.env.FOREST_AUTH_SECRET,
    envSecret: process.env.FOREST_ENV_SECRET,
    isProduction: process.env.NODE_ENV === 'production',
    {{#if forestUrl}}
    forestServerUrl: process.env.FOREST_SERVER_URL,
    {{/if}}
    typingsPath: './typings.d.ts',
  })
  .addDataSource({{datasourceCreation}})
  .mountOnStandaloneServer(process.env.APPLICATION_PORT)
  .start();
})();
